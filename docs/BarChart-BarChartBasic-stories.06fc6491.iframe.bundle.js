"use strict";(self.webpackChunk_vannizhang_react_d3_charts=self.webpackChunk_vannizhang_react_d3_charts||[]).push([[144],{"./src/BarChart/BarChartBasic.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomStyle:function(){return CustomStyle},CustomizedAxisOptions:function(){return CustomizedAxisOptions},Default:function(){return Default},ShowTooltipAndReferenceLine:function(){return ShowTooltipAndReferenceLine},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return BarChartBasic_stories}});__webpack_require__("./src/variables.css");var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),SvgContainer=__webpack_require__("./src/SvgContainer/SvgContainer.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Bars=({xScale:xScale,yScale:yScale,data:data,svgContainerData:svgContainerData,fill:fill="steelblue"})=>{const barsGroup=(0,react.useRef)();return(0,react.useEffect)((()=>{svgContainerData&&xScale&&yScale&&data&&(()=>{const{dimension:dimension}=svgContainerData,{height:height}=dimension,existingBars=(0,src.Ys)(barsGroup.current).selectAll("rect");existingBars.size()&&existingBars.remove(),(0,src.Ys)(barsGroup.current).selectAll("rect").data(data).enter().append("rect").style("fill",fill).attr("x",(d=>xScale(d.key))).attr("width",xScale.bandwidth()).attr("y",(d=>yScale(d.value))).attr("height",(d=>height-yScale(d.value)))})()}),[xScale,yScale,data]),(0,jsx_runtime.jsx)("g",{ref:barsGroup,className:"bar-group"})};Bars.displayName="Bars";var BarChart_Bars=Bars;try{Bars.displayName="Bars",Bars.__docgenInfo={description:"",displayName:"Bars",props:{xScale:{defaultValue:null,description:"",name:"xScale",required:!0,type:{name:"ScaleBand<string | number>"}},yScale:{defaultValue:null,description:"",name:"yScale",required:!0,type:{name:"ScaleLinear<number, number, never>"}},svgContainerData:{defaultValue:null,description:"",name:"svgContainerData",required:!1,type:{name:"SvgContainerData"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"BarChartData"}},fill:{defaultValue:{value:"steelblue"},description:"fill color of bar rects",name:"fill",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/BarChart/Bars.tsx#Bars"]={docgenInfo:Bars.__docgenInfo,name:"Bars",path:"src/BarChart/Bars.tsx#Bars"})}catch(__react_docgen_typescript_loader_error){}var XAxis=__webpack_require__("./src/XAxis/XAxis.tsx"),YAxis=__webpack_require__("./src/YAxis/YAxis.tsx"),PointerEventsOverlay=__webpack_require__("./src/PointerEventOverlay/PointerEventsOverlay.tsx"),TooltipOnTop=__webpack_require__("./src/Tooltip/TooltipOnTop.tsx"),PointerReferenceLine=__webpack_require__("./src/PointerEventOverlay/PointerReferenceLine.tsx");var constants=__webpack_require__("./src/SvgContainer/constants.ts");const BarChartBasic=({data:data,fill:fill,showTooltip:showTooltip,margin:margin=constants.A,xAxisOptions:xAxisOptions={},yAxisOptions:yAxisOptions={}})=>{const[dimension,setDimension]=(0,react.useState)({height:0,width:0}),[hoveredChartItem,setHoveredChartItem]=(0,react.useState)(),xDomain=(0,react.useMemo)((()=>data&&data.length?data.map((d=>"number"==typeof d.key?d.key.toString():d.key)):[]),[data]),xScale=(0,react.useMemo)((()=>{const{width:width}=dimension;return(0,src.tiA)().paddingInner(.2).range([0,width]).domain(xDomain)}),[dimension,xDomain]),yScale=(0,react.useMemo)((()=>{const{height:height}=dimension,ymax=data&&data.length?(0,src.Fp7)(data,(d=>d.value)):0;return(0,src.BYU)().range([height,0]).domain([0,ymax])}),[dimension,data]);return(0,jsx_runtime.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,jsx_runtime.jsxs)(SvgContainer.Z,{margin:margin,dimensionOnChange:setDimension,children:[(0,jsx_runtime.jsx)(BarChart_Bars,{data:data,xScale:xScale,yScale:yScale,fill:fill}),(0,jsx_runtime.jsx)(XAxis.K,{scale:xScale,showGridLines:xAxisOptions.showGridLines,tickValues:xAxisOptions.tickValues,tickFormatFunction:xAxisOptions.tickFormatFunction}),(0,jsx_runtime.jsx)(YAxis.B,{scale:yScale,showGridLines:yAxisOptions.showGridLines,numberOfTicks:yAxisOptions.numberOfTicks,tickFormatFunction:yAxisOptions.tickFormatFunction}),showTooltip?(0,jsx_runtime.jsx)(PointerReferenceLine.W,{xPosition:hoveredChartItem?hoveredChartItem.xPosition:null}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsx)(PointerEventsOverlay.X,{xScale:xScale,xDomain:xDomain,hoveredChartItemOnChange:setHoveredChartItem})]}),showTooltip&&hoveredChartItem&&(0,jsx_runtime.jsx)(TooltipOnTop.d,{content:data[hoveredChartItem.index]?.tooltip,xPosition:hoveredChartItem.xPosition,dimension:dimension,margin:margin})]})};BarChartBasic.displayName="BarChartBasic";try{BarChartBasic.displayName="BarChartBasic",BarChartBasic.__docgenInfo={description:"Basic Bar Chart",displayName:"BarChartBasic",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"BarChartData"}},fill:{defaultValue:null,description:"fill color of the Bar Rectange",name:"fill",required:!1,type:{name:"string"}},showTooltip:{defaultValue:null,description:"if true, show tooltip when user hovers a bar element",name:"showTooltip",required:!0,type:{name:"boolean"}},margin:{defaultValue:{value:"{\n    top: 15,\n    right: 15,\n    bottom: 30,\n    left: 30,\n}"},description:"custom margins space",name:"margin",required:!1,type:{name:"SvgContainerMargins"}},xAxisOptions:{defaultValue:{value:"{}"},description:"options to customized x axis",name:"xAxisOptions",required:!1,type:{name:"XAxisOptions"}},yAxisOptions:{defaultValue:{value:"{}"},description:"options to customized y axis",name:"yAxisOptions",required:!1,type:{name:"YAxisOptions"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/BarChart/BarChartBasic.tsx#BarChartBasic"]={docgenInfo:BarChartBasic.__docgenInfo,name:"BarChartBasic",path:"src/BarChart/BarChartBasic.tsx#BarChartBasic"})}catch(__react_docgen_typescript_loader_error){}const data=[{key:"12/1",value:26,tooltip:"this is a tooltip"},{key:"12/2",value:38,tooltip:"this is a tooltip"},{key:"12/3",value:10,tooltip:"this is a tooltip"},{key:"12/4",value:45,tooltip:"this is a tooltip"},{key:"12/5",value:10,tooltip:"this is a tooltip"},{key:"12/6",value:12,tooltip:"this is a tooltip"},{key:"12/7",value:15,tooltip:"this is a tooltip"},{key:"12/8",value:7,tooltip:"this is a tooltip"},{key:"12/9",value:23,tooltip:"this is a tooltip"},{key:"12/10",value:4,tooltip:"this is a tooltip, and it is longer than other ones"}];var BarChartBasic_stories={title:"Example/BarChartBasic",component:BarChartBasic,decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,jsx_runtime.jsx)(Story,{})})],tags:["autodocs"]};const Default={args:{data:data}},CustomStyle={args:{data:data,fill:"orange"}},CustomizedAxisOptions={args:{data:data,xAxisOptions:{showGridLines:!0,tickValues:["12/1","12/5","12/10"],tickFormatFunction:val=>{const[month,day]=val.split("/");return`${month}-${day}`}},yAxisOptions:{showGridLines:!0,numberOfTicks:3}}},ShowTooltipAndReferenceLine={args:{data:data,showTooltip:!0}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  // More on args: https://storybook.js.org/docs/react/writing-stories/args\n  args: {\n    data\n  }\n}",...Default.parameters?.docs?.source}}},CustomStyle.parameters={...CustomStyle.parameters,docs:{...CustomStyle.parameters?.docs,source:{originalSource:"{\n  // More on args: https://storybook.js.org/docs/react/writing-stories/args\n  args: {\n    data,\n    fill: 'orange'\n  }\n}",...CustomStyle.parameters?.docs?.source}}},CustomizedAxisOptions.parameters={...CustomizedAxisOptions.parameters,docs:{...CustomizedAxisOptions.parameters?.docs,source:{originalSource:"{\n  // More on args: https://storybook.js.org/docs/react/writing-stories/args\n  args: {\n    data,\n    xAxisOptions: {\n      showGridLines: true,\n      tickValues: ['12/1', '12/5', '12/10'],\n      /**\r\n       * formar tick value from `12/1` to `12-1`\r\n       * @param val\r\n       * @returns\r\n       */\n      tickFormatFunction: (val: string) => {\n        const [month, day] = val.split('/');\n        return `${month}-${day}`;\n      }\n    },\n    yAxisOptions: {\n      showGridLines: true,\n      numberOfTicks: 3\n    }\n  }\n}",...CustomizedAxisOptions.parameters?.docs?.source}}},ShowTooltipAndReferenceLine.parameters={...ShowTooltipAndReferenceLine.parameters,docs:{...ShowTooltipAndReferenceLine.parameters?.docs,source:{originalSource:"{\n  // More on args: https://storybook.js.org/docs/react/writing-stories/args\n  args: {\n    data,\n    showTooltip: true\n  }\n}",...ShowTooltipAndReferenceLine.parameters?.docs?.source}}};const __namedExportsOrder=["Default","CustomStyle","CustomizedAxisOptions","ShowTooltipAndReferenceLine"]}}]);